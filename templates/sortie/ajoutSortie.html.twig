{% extends 'base.html.twig' %}

{% block title %} {{ parent() }}  {% endblock %}

{% block stylesheet %}

    {{ parent() }}

    <link rel="stylesheet" href="{{ asset('css/sortie.css') }}">

{% endblock %}

{% block body %}

    <div class="container">
        <div class="card row mt-5">
            {{ form_start(formSortie, { 'attr': {'class': 'form-inline mt-5', 'id': 'form_add_sortie'} }) }}

            {{ form_errors(formSortie) }}

            <div class="col-sm-6">
                <div class="col-sm-12">
                    <div class="form-group mb-3 ">
                        <label for="sortie_nom" class="col-sm-5 col-form-label justify-content-end ">
                            Nom
                            <span class="required">*</span>
                        </label>
                        <div class="col-sm-7">
                            {{ form_widget(formSortie.nom, { 'attr': {'id': 'sortie_nom'} }) }}
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="form-group mb-3">
                        <label for="sortie_date_debut" class="col-sm-5 col-form-label justify-content-end">
                            Date de début
                            <span class="required">*</span>
                        </label>
                        <div class="col-sm-7">
                            {{ form_widget(formSortie.dateDebut, { 'attr': {'id': 'sortie_date_debut'} }) }}
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="form-group mb-3">
                        <label for="sortie_date_cloture" class="col-sm-5 col-form-label justify-content-end">
                            Date de cloture
                            <span class="required">*</span>
                        </label>
                        <div class="col-sm-7">
                            {{ form_widget(formSortie.dateCloture, { 'attr': {'id': 'sortie_date_cloture'} }) }}
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="form-group mb-3">
                        <label for="sortie_duree" class="col-sm-5 col-form-label justify-content-end">
                            Durée de l'évènement
                            <span class="required">*</span>
                        </label>
                        <div class="col-sm-7">
                            {{ form_widget(formSortie.duree, { 'attr': {'id': 'sortie_duree'} }) }}
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="form-group mb-3">
                        <label for="sortie_description" class="col-sm-5 col-form-label justify-content-end">
                            Description
                            <span class="required">*</span>
                        </label>
                        <div class="col-sm-7">
                            {{ form_widget(formSortie.descriptionInfo, { 'attr': {'id': 'sortie_descriptionInfo'} }) }}
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="form-group mb-3">
                        <label for="sortie_inscriptions_max" class="col-sm-7 col-form-label justify-content-end">
                            Nombre d'inscriptions maximum
                            <span class="required">*</span>
                        </label>
                        <div class="col-sm-5">
                            {{ form_widget(formSortie.nombreInscriptionsMax, { 'attr': {'id': 'sortie_inscriptions_max'} }) }}
                        </div>
                    </div>
                </div>
            </div>

            <div class='col-sm-6'>
                <div class="col-sm-12">
                    <div class="form-group mb-3">
                        <label for="sortie_campus_organisateur" class="col-sm-6 col-form-label justify-content-end">
                            Campus organisateur :
                        </label>
                        <div class="col-sm-6">
                            {{  campusName }}
                        </div>
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="form-group mb-3">
                        <label for="sortie_lieu" class="col-sm-6 col-form-label justify-content-end">
                            Lieu de l'évenement
                            <span class="required">*</span>
                        </label>
                        <div class="col-sm-6">
                            {{ form_widget(formSortie.lieu, { 'attr': {'id': 'sortie_lieu', 'placeholder': 'Lieu de l\'évenement'} }) }}
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-6 col-form-label justify-content-end">Vous ne trouver pas le lieu ?</label>
                        <div class="col-sm-6">
                            <button class="btn btn_custom_secondary" onclick="getModaleLieu(-1)">Ajouter</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="m-auto">
                {{ form_widget(formSortie.enregister) }}
            </div>

            {{ form_end(formSortie) }}
        </div>
    </div>

{% endblock %}

{% block javascripts %}

    {{ parent() }}

    <script>
        function getModaleLieu(id) {
            $routeGetModaleLieu = '{{ path('get_modale_lieu') }}';
            $.ajax({
                url: $routeGetModaleLieu,
                data: {
                    idLieu: id
                },
                type: 'GET',
                success: function (data) {
                    $(data).modal();
                }
            });
        }
    </script>

{% endblock %}